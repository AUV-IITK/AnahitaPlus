<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AnahitaPlus: coding_guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AnahitaPlus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">coding_guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Use <a href="https://akrabat.com/the-beginners-guide-to-contributing-to-a-github-project/">usual steps</a> to make changes into the project just like other GitHub projects.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Code style</h1>
<ul>
<li><em>Cpp</em> follow ROS <a href="http://wiki.ros.org/CppStyleGuide">Cpp Style Guide</a> rigorously.</li>
<li><em>CMake</em> follow Caktin <a href="http://docs.ros.org/jade/api/catkin/html/user_guide/standards.html">CMake Style Guide</a>.</li>
<li><em>Python</em> code should follow <a href="http://www.python.org/dev/peps/pep-0008/">pep8</a>. Please see <a href="http://wiki.ros.org/PyStyleGuide">ROS PyStyleGuide</a> for details. Use <code>Anaconda</code> plugin for sublime text editor for style check.</li>
<li><em>Bash</em> Use this <a href="http://arachnoid.com/python/beautify_bash_program.html">python script</a>.</li>
<li><em>Roslint</em> All pkgs (except <code>commons</code> pkgs which don't have cpp or py code) depend on <a href="http://wiki.ros.org/roslint">roslint</a> for static code analysis.</li>
</ul>
<p><b>Note:</b> <a href="https://github.com/AUV-IITK/auv2017/tree/master/utils">Utils</a> contains scripts for formatting <code>cpp</code>, <code>python</code>, <code>xml</code>, <code>CMakeLists</code> files. Since these are bash scripts, there is a formatting script for <code>bash</code>.</p>
<hr/>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>We maintain two forms of online documentation for ROS packages:</p><ul>
<li><em>wiki pages</em> / External docs: This is the AUVWiki repo. Home for tutorials, design documents and other sorts of information. This is mainly for people running your code. In general anything that people need to know outside source i.e. while only running auv code goes in the auv-wiki, anything else goes to package doc.</li>
<li><em>auto-generated code documentation</em> Internal docs: This is mainly for people integrating with or editing your code. There are auto generated from source code comments using doxygen. Travis CI generated and auto deploys to gh-pages branch. Located at <a href="http://auv-iitk.github.io/auv/">http://auv-iitk.github.io/auv/</a> . Look at <a href="https://github.com/AUV-IITK/auv/pull/103/commits/c23d7efdadbfd611276e20509f98e6b39328fa20">sample commit</a> to see how to add documentation. Also <a href="https://www.stack.nl/~dimitri/doxygen/manual/docblocks.html">Doxygen manual</a> is good for quick start.</li>
</ul>
<hr/>
<h1><a class="anchor" id="autotoc_md2"></a>
Source control</h1>
<p>We use Git. Read the wiki page on git.</p>
<hr/>
<h1><a class="anchor" id="autotoc_md3"></a>
Bug tracking</h1>
<p>We use github issues on auv repo for tracking bugs.</p>
<hr/>
 <h1><a class="anchor" id="autotoc_md4"></a>
(_Still missing_)  Testing</h1>
<p>We use two level of testing:</p><ul>
<li>Library: At the library level, we use standard unit-test frameworks. In C++, we use <a href="http://wiki.ros.org/gtest">gtest</a>. In Python, we use <a href="http://wiki.ros.org/unittest">unittest</a>.</li>
<li>Message: At the message level, we use <a href="http://wiki.ros.org/rostest">rostest</a> to set up a system of ROS nodes, run a test node, then tear down the system.</li>
</ul>
<p>ROS has established best <a href="http://wiki.ros.org/UnitTesting">practices and policies</a> for writing and running tests. Auv code is structured in layers, with each layer interacting with the other using <code>actionlib</code>. For testing each layer separately we use unit tests nodes which are part of the concerning layer itself.</p>
<hr/>
<h1><a class="anchor" id="autotoc_md5"></a>
Standardization</h1>
<p>Code should use ROS services, follow guidelines for their use: use <a href="http://wiki.ros.org/rosout">rosout</a> for printing messages uses the ROS <a href="http://wiki.ros.org/Clock">Clock</a> for time-based routines</p>
<hr/>
<h1><a class="anchor" id="autotoc_md6"></a>
Large data files</h1>
<p>Large files (anything over 1MB, really) often don't belong in the auv repositories, especially if they are just used for tests. These large files affect the time that it takes to checkout the repository.</p>
<hr/>
<h1><a class="anchor" id="autotoc_md7"></a>
Naming Convention</h1>
<p>Please refer to <a href="http://wiki.ros.org/CppStyleGuide#Naming">ROS CppStyleGuide</a> and <a href="http://wiki.ros.org/ROS/Patterns/Conventions#Naming_ROS_Resources">ROS Conventions</a>.</p>
<p>Avoid using any sort of Hungarian notation on names and "_ptr" on pointers.</p>
<table class="doxtable">
<tr>
<th><b>Code Element</b> </th><th><b>Style</b> </th><th><b>Comment</b>  </th></tr>
<tr>
<td>Namespace </td><td>under_scored </td><td>Differentiate from class names </td></tr>
<tr>
<td>Class name </td><td>CamelCase </td><td>To differentiate from STL types which ISO recommends (do not use "C" or "T" prefixes) </td></tr>
<tr>
<td>Function name </td><td>camelCase </td><td>Lower case start is almost universal except for .Net world </td></tr>
<tr>
<td>Parameters/Locals </td><td>under_scored </td><td>Vast majority of standards recommends this because _ is more readable to C++ crowd (although not much to Java/.Net crowd) </td></tr>
<tr>
<td>Member variables </td><td>under_scored_with_ </td><td>The prefix _ is heavily discouraged as ISO has rules around reserving _identifiers, so we recommend suffix instead </td></tr>
<tr>
<td>Enums and its members </td><td>CamelCase </td><td>Most except very old standards agree with this one </td></tr>
<tr>
<td>Globals </td><td>g_under_scored </td><td>You shouldn't have these in first place! </td></tr>
<tr>
<td>Constants </td><td>UPPER_CASE </td><td>Very contentious and we just have to pick one here, unless if is a private constant in class or method, then use naming for Members or Locals </td></tr>
<tr>
<td>File names </td><td>Match case of class name in file </td><td>Lot of pro and cons either way but this removes inconsistency in auto generated code (important for ROS) </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md8"></a>
Header Files</h2>
<p>Use a namespace qualified #ifdef to protect against multiple inclusion:</p>
<div class="fragment"><div class="line">#ifndef msr_airsim_MyHeader_hpp</div><div class="line">#define msr_airsim_MyHeader_hpp</div><div class="line"></div><div class="line">//--your code</div><div class="line"></div><div class="line">#endif</div></div><!-- fragment --><p>The reason we don't use #pragma once is because it's not supported if same header file exists at multiple places (which might be possible under ROS build system!).</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Bracketing</h2>
<p>Inside function or method body place curly bracket on same line. Outside that the Namespace, Class and methods levels use separate line. This is called <a href="https://en.wikipedia.org/wiki/Indent_style#K.26R_style">K&amp;R style</a> and its variants are widely used in C++ vs other styles which are more popular in other languages. Notice that curlies are not required if you have single statement, but complex statements are easier to keep correct with the braces.</p>
<div class="fragment"><div class="line">int main(int argc, char* argv[])</div><div class="line">{</div><div class="line">     while (x == y) {</div><div class="line">        f0();</div><div class="line">        if (cont()) {</div><div class="line">            f1();</div><div class="line">        } else {</div><div class="line">            f2();</div><div class="line">            f3();</div><div class="line">        }</div><div class="line">        if (x &gt; 100)</div><div class="line">            break;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Const and References</h2>
<p>Religiously review all non-scalar parameters you declare to be candidate for const and references. If you are coming from languages such as C#/Java/Python, the most often mistake you would make is to pass parameters by value instead of <code>const T&amp;;</code> Especially most of the strings, vectors and maps you want to pass as <code>const T&amp;;</code> (if they are readonly) or <code>T&amp;</code> (if they are writable). Also add <code>const</code> suffix to methods as much as possible.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Overriding</h2>
<p>When overriding virtual method, use override suffix.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Pointers</h2>
<p>This is really about memory management. A simulator has much performance cricial code, so we try and avoid overloading the memory manager with lots of calls to new/delete. We also want to avoid too much copying of things on the stack, so we pass things by reference when ever possible. But when the object really needs to live longer than the call stack you often need to allocate that object on the heap, and so you have a pointer. Now, if management of the lifetime of that object is going to be tricky we recommend using <a href="https://cppstyle.wordpress.com/c11-smart-pointers/">C++ 11 smart pointers</a>. But smart pointers do have a cost, so don’t use them blindly everywhere. For private code where performance is paramount, raw pointers can be used. Raw pointers are also often needed when interfacing with legacy systems that only accept pointer types, for example, sockets API. But we try to wrap those legacy interfaces as much as possible and avoid that style of programming from leaking into the larger code base.</p>
<p>Religiously check if you can use const everywhere, for example, <code>const float * const xP</code>. Avoid using prefix or suffix to indicate pointer types in variable names, i.e. use <code>my_obj</code> instead of <code>myobj_ptr</code> except in cases where it might make sense to differentiate variables better, for example, <code>int mynum = 5; int* mynum_ptr = mynum;</code></p>
<h2><a class="anchor" id="autotoc_md13"></a>
ROS Naming Convention</h2>
<ul>
<li>Topics and nodes should be names keeping in mind the <code>ros namespace</code>. For keeping it noob friendly, global names should be assigned to nodes and topics.</li>
<li>Package folder name should be same as package name.</li>
<li>Node file name, executable name and ros node name should be same.</li>
<li>Dynamic Reconfigure cfg files should be related to what it helps configuring.</li>
<li>Action files should be named after what action or task is done through them.</li>
<li>Launch files should be named after what state it will launch the nodes in.</li>
</ul>
<hr/>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
